<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stotram Transliterator + Formatter</title>
  <style>
    body {
      font-family: 'Noto Serif', serif;
      background: #f9f9f9;
      color: #333;
      padding: 2em;
      max-width: 900px;
      margin: auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 1em;
    }

    .box-container {
      margin-bottom: 1.5em;
    }

    .options-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5em;
    }

    select {
      padding: 6px;
      font-size: 1em;
    }

    textarea {
      width: 100%;
      height: 160px;
      font-size: 1.1em;
      padding: 10px;
      box-sizing: border-box;
      font-family: 'Noto Serif Devanagari', 'Noto Serif Bengali', serif;
      white-space: pre-wrap;
    }

    button {
      padding: 6px 12px;
      background: #4caf50;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 0.9em;
    }

    .copy-btn {
      background: #2196f3;
    }

    .action-bar {
      text-align: center;
      margin-bottom: 1em;
    }

    .iast { font-family: 'Noto Serif', serif; font-style: italic; }
    .devanagari { font-family: 'Noto Serif Devanagari', serif; }
    .bengali { font-family: 'Noto Serif Bengali', serif; }
  </style>
</head>
<body>

  <h1>üìú Stotram Transliterator + Formatter</h1>

  <!-- Input box -->
  <div class="box-container">
    <div class="options-bar">
      <div>
        <strong>Input Script:</strong>
        <select id="inputScript">
          <option value="devanagari">Devanagari</option>
          <option value="bengali">Bengali</option>
          <option value="iast">IAST</option>
        </select>
      </div>
      <button class="copy-btn" onclick="copyText('inputBox')">Copy</button>
    </div>
    <textarea id="inputBox" placeholder="Type or paste your text here..."></textarea>
  </div>

  <!-- Action -->
  <div class="action-bar">
    <button onclick="transliterate()">‚áÖ Transliterate ‚áÖ</button>
  </div>

  <!-- Output box -->
  <div class="box-container">
    <div class="options-bar">
      <div>
        <strong>Output Script:</strong>
        <select id="outputScript">
          <option value="iast">IAST</option>
          <option value="devanagari">Devanagari</option>
          <option value="bengali">Bengali</option>
        </select>
      </div>
      <button class="copy-btn" onclick="copyText('outputBox')">Copy</button>
    </div>
    <textarea id="outputBox" readonly></textarea>
  </div>

<script>
  // ------------------ SCRIPT MAPPINGS ------------------

  const devToIAST = {
    '‡§ï':'k','‡§ñ':'kh','‡§ó':'g','‡§ò':'gh','‡§ô':'·πÖ',
    '‡§ö':'c','‡§õ':'ch','‡§ú':'j','‡§ù':'jh','‡§û':'√±',
    '‡§ü':'·π≠','‡§†':'·π≠h','‡§°':'·∏ç','‡§¢':'·∏çh','‡§£':'·πá',
    '‡§§':'t','‡§•':'th','‡§¶':'d','‡§ß':'dh','‡§®':'n',
    '‡§™':'p','‡§´':'ph','‡§¨':'b','‡§≠':'bh','‡§Æ':'m',
    '‡§Ø':'y','‡§∞':'r','‡§≤':'l','‡§µ':'v',
    '‡§∂':'≈õ','‡§∑':'·π£','‡§∏':'s','‡§π':'h',
    '‡§Ö':'a','‡§Ü':'ƒÅ','‡§á':'i','‡§à':'ƒ´','‡§â':'u','‡§ä':'≈´',
    '‡§ã':'·πõ','‡•†':'·πù','‡§è':'e','‡§ê':'ai','‡§ì':'o','‡§î':'au',
    '‡§æ':'ƒÅ','‡§ø':'i','‡•Ä':'ƒ´','‡•Å':'u','‡•Ç':'≈´','‡•É':'·πõ','‡•Ñ':'·πù',
    '‡•á':'e','‡•à':'ai','‡•ã':'o','‡•å':'au',
    '‡§Ç':'·πÉ','‡§É':'·∏•','‡§Å':'ÃÉ',
    '‡•ç':'','‡§Ω':"'",'‡•§':'|','‡••':'||',
    '‡•¶':'0','‡•ß':'1','‡•®':'2','‡•©':'3','‡•™':'4','‡•´':'5','‡•¨':'6','‡•≠':'7','‡•Æ':'8','‡•Ø':'9'
  };

  const benToIAST = {
    '‡¶ï':'k','‡¶ñ':'kh','‡¶ó':'g','‡¶ò':'gh','‡¶ô':'·πÖ',
    '‡¶ö':'c','‡¶õ':'ch','‡¶ú':'j','‡¶ù':'jh','‡¶û':'√±',
    '‡¶ü':'·π≠','‡¶†':'·π≠h','‡¶°':'·∏ç','‡¶¢':'·∏çh','‡¶£':'·πá',
    '‡¶§':'t','‡¶•':'th','‡¶¶':'d','‡¶ß':'dh','‡¶®':'n',
    '‡¶™':'p','‡¶´':'ph','‡¶¨':'b','‡¶≠':'bh','‡¶Æ':'m',
    '‡¶Ø':'y','‡¶∞':'r','‡¶≤':'l','‡¶∂':'≈õ','‡¶∑':'·π£','‡¶∏':'s','‡¶π':'h',
    '‡¶Ö':'a','‡¶Ü':'ƒÅ','‡¶á':'i','‡¶à':'ƒ´','‡¶â':'u','‡¶ä':'≈´','‡¶ã':'·πõ','‡ß†':'·πù',
    '‡¶è':'e','‡¶ê':'ai','‡¶ì':'o','‡¶î':'au',
    '‡¶æ':'ƒÅ','‡¶ø':'i','‡ßÄ':'ƒ´','‡ßÅ':'u','‡ßÇ':'≈´','‡ßÉ':'·πõ','‡ßÑ':'·πù',
    '‡ßá':'e','‡ßà':'ai','‡ßã':'o','‡ßå':'au',
    '‡¶Ç':'·πÉ','‡¶É':'·∏•','‡¶Å':'ÃÉ',
    '‡ßç':'','‡•§':'|','‡••':'||',
    '‡ß¶':'0','‡ßß':'1','‡ß®':'2','‡ß©':'3','‡ß™':'4','‡ß´':'5','‡ß¨':'6','‡ß≠':'7','‡ßÆ':'8','‡ßØ':'9'
  };

  function isConsonantDev(c){ return /[‡§ï-‡§π]/.test(c); }
  function isVowelSignDev(c){ return /[‡§æ‡§ø‡•Ä‡•Å‡•Ç‡•É‡•Ñ‡•á‡•à‡•ã‡•å]/.test(c); }
  function devanagariToIAST(text){
    let out = '', chars = Array.from(text);
    for(let i=0;i<chars.length;i++){
      let c=chars[i], next=chars[i+1], m=devToIAST[c]||c;
      if(isConsonantDev(c)){
        if(next==='‡•ç') out+=m;
        else if(isVowelSignDev(next)) out+=m;
        else out+=m+'a';
      } else if(isVowelSignDev(c)) out+=m;
      else if(c==='‡•ç') continue;
      else out+=m;
    }
    return out;
  }

  function isConsonantBen(c){ return /[‡¶ï-‡¶π]/.test(c); }
  function isVowelSignBen(c){ return /[‡¶æ‡¶ø‡ßÄ‡ßÅ‡ßÇ‡ßÉ‡ßÑ‡ßá‡ßà‡ßã‡ßå]/.test(c); }
  function bengaliToIAST(text){
    let out = '', chars = Array.from(text);
    for(let i=0;i<chars.length;i++){
      let c=chars[i], next=chars[i+1], m=benToIAST[c]||c;
      if(isConsonantBen(c)){
        if(next==='‡ßç') out+=m;
        else if(isVowelSignBen(next)) out+=m;
        else out+=m+'a';
      } else if(isVowelSignBen(c)) out+=m;
      else if(c==='‡ßç') continue;
      else out+=m;
    }
    return out;
  }

  function iastToDevanagari(iast){
    let out = iast;
    // reverse replace longer first to avoid partials
    const entries = Object.entries(devToIAST).sort((a,b)=>b[1].length - a[1].length);
    for(const [dev, iastVal] of entries){
      out = out.replace(new RegExp(iastVal,'g'), dev);
    }
    return out;
  }

  function iastToBengali(iast){
    let out = iast;
    const entries = Object.entries(benToIAST).sort((a,b)=>b[1].length - a[1].length);
    for(const [ben, iastVal] of entries){
      out = out.replace(new RegExp(iastVal,'g'), ben);
    }
    return out;
  }

  // ------------------ MAIN ------------------

  function transliterate(){
    const input = document.getElementById('inputBox').value.trim();
    const inScript = document.getElementById('inputScript').value;
    const outScript = document.getElementById('outputScript').value;
    let iast;

    if(inScript === 'devanagari') iast = devanagariToIAST(input);
    else if(inScript === 'bengali') iast = bengaliToIAST(input);
    else iast = input;

    let output;
    if(outScript === 'iast') output = iast;
    else if(outScript === 'devanagari') output = iastToDevanagari(iast);
    else if(outScript === 'bengali') output = iastToBengali(iast);

    document.getElementById('outputBox').value = output;
  }

  function copyText(id){
    const el = document.getElementById(id);
    el.select();
    el.setSelectionRange(0, 99999);
    document.execCommand('copy');
  }

</script>

</body>
</html>
